---
layout: post
title:  "无人驾驶第一课-Lesson 2：高精度地图"
date:   2018-07-12 16:25:45
categories: self-driving
tags: 无人驾驶
      Apollo
---

* content
{:toc}

从 Apollo 起步-Lesson 2：高精度地图
<!--more-->


# 高精度地图

## 导航地图(Navigation Map)VS高精度地图(HD Map)
高精度地图是当前无人驾驶车技术不可或缺的一部分。

高精度地图包含大量的驾驶辅助信息，最重要的信息是道路网的精确三维表征。
例如 ：交叉路口布局和路标位置。高精度地图还包含很多语义信息，地图可能会报告交通灯上不同颜色的含义，它也可能指示道路的速度限制
以及左转车道开始的位置。

高精度地图最重要的特征之一是精度。手机上的导航地图只能达到米级精度，高精度地图使车辆能够达到厘米级的精度，这对确保无人驾驶车辆的安全性至关重要

## 地图与定位

可以将定位与拼图进行比较。如果我同时为你提供地图和同一张地图的一小块，你能否在地图上找到这一小块的确切位置？试一试，
正如拼图游戏那样。无人驾驶车辆需要知道它在地图上的确切位置，首先 车辆可能会寻找地标。我们可以使用从各类传感器收集的数据
，如摄像机图像数据以及激光雷达收集的三维点云数据来查找地标。车辆将其收集的数据与其高精度地图上的已知地标进行比较.

 这一匹配过程是需要预处理、坐标转换和数据融合的复杂过程 。
- 预处理消除了不准确或质量差的数据,
- 坐标变换将来自不同视角的数据转换为统一的坐标系
- 借助数据融合 可将来自各种车辆和传感器的数据合并

一旦无人驾驶车高度精确地确定了其位置,定位任务也就完成了. 整个定位过程取决于地图.

正因为如此 车辆需要高精度地图 以便知道它处于什么位置

## 地图与感知

- 无人驾驶车也可以使用高精度地图来帮助感知。人有眼睛和耳朵，但都有距离限制，我们无法看到或听到太远的事物。无人驾驶汽车的传感器也会受到类似限制
摄像机、激光雷达和雷达探测物体的能力，在超过一定距离后都会受到限制。在恶劣的天气条件下或在夜间，传感器识别障碍物的能力可能会受到进一步限制
另外 当汽车遇到障碍物时，传感器无法透过障碍物来确定障碍物后面的物体。在这种情况下 高精度地图有很大帮助。即使传感器尚未检测到交通信号灯
它也可以将交通信号灯的位置提供给软件栈的其余部分，这可以帮助汽车做下一个决策。

- 另一个好处在于 地图可帮助传感器缩小检测范围。例如 高精度地图可能会告知我们，在特定位置寻找停车标志。传感器就可以集中在该位置检测停车标志。
这被称为感兴趣区域或 ROI，ROI 可帮助我们提高检测精确度和速度，并节约计算资源。

## 地图与规划
正如定位和感知软件依赖于高精度地图那样，规划软件也是如此。

高精度地图可帮助车辆找到合适的行车空间，它还可以帮助规划器确定不同的路线选择，并帮助预测软件预测道路上其他车辆在将来的位置。

例如 高精度地图可帮助车辆识别车道的确切中心线，这样车辆可以尽可能地靠近中心行驶。

在具有低速限制、人行横道或减速带的区域，高精度地图使车辆能够提前查看 并预先减速

更重要的是 如果前方有障碍物，车辆可能需要变道，高精度地图可帮助车辆缩小选择范围，以便选择最佳方案。

## appllo高精度地图

高精度地图的构建由五个过程组成：数据采集、数据处理、对象检测、手动验证和地图发布.

- ** 数据采集 ** 是一项庞大的密集型任务.无人驾驶车需要其地图始终保持最新状态。大量的调查车辆可确保每次道路发生改变时
，地图均会得到快速更新。调查车辆使用了多种传感器 如 GPS、惯性测量单元、激光雷达和摄像机。Apollo 定义了一个硬件框架
将这些传感器集成到单个自主系统中，通过支持多种类的传感器，Apollo 可以收集各类数据，将这些数据融合，最终生成高精度地图。

- 数据处理指的是 Apollo 如何对收集到的数据进行整理、分类和清洗以获得没有任何语义信息或注释的初始地图模板

- 对于对象检测 Apollo 团队使用人工智能来检测静态对象，并对其进行分类，其中包括车道线、交通标志 甚至是电线杆

- 手动验证可确保自动地图创建过程正确进行并及时发现问题。Apollo 软件使手动验证团队能够高效标记和编辑地图。

- 在经过数据采集、数据处理、对象检测和手动验证之后 地图即可发布。除发布高精度地图外，Apollo 还发布了采用自上而下视图
的相应定位地图以及三维点云地图
